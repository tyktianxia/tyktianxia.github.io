---
title: v2注意
date: 2021-12-02 15:23:41
tags: JS v2
---

## 注意事项
- watch 是同步的，同一个函数中多次调用age++, 对应的watch只会触发一次。可以使用await this.$nextTick()

## 特殊情景
1. 同时触发a,b的watch，又分别调用c, 怎么只触发一次c
````
  watch: {
    async a() {
      this.arr.push(this.c);
      console.log("a");
      await this.$nextTick();
      if (this.arr.length > 0) {
        this.arr[0]();
        this.arr = [];
      }
    },
    async b() {
      this.arr.push(this.c);
      console.log("b");
      await this.$nextTick();
      if (this.arr.length > 0) {
        this.arr[0]();
        this.arr = [];
      }
    },
  },
  methods: {
    c() {
      console.log("c");
    },
    fun1() {
      this.a++;
      this.b++;
    },
  },
````
  - 由于a,b同时触发，对应的watch在同一个执行栈中，
  - 先将this.c存入中间数组
  - 利用 await this.$nextTick(),将触发c的动作放入下一执行栈，
  - 根据中间数组的length作为限制条件，触发c，
